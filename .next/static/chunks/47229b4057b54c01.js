(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,18566,(e,t,a)=>{t.exports=e.r(76562)},75254,e=>{"use strict";var t=e.i(71645);let a=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,a)=>a?a.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)},l=(...e)=>e.filter((e,t,a)=>!!e&&""!==e.trim()&&a.indexOf(e)===t).join(" ").trim();var s={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let r=(0,t.forwardRef)(({color:e="currentColor",size:a=24,strokeWidth:r=2,absoluteStrokeWidth:o,className:i="",children:n,iconNode:d,...c},u)=>(0,t.createElement)("svg",{ref:u,...s,width:a,height:a,stroke:e,strokeWidth:o?24*Number(r)/Number(a):r,className:l("lucide",i),...!n&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(c)&&{"aria-hidden":"true"},...c},[...d.map(([e,a])=>(0,t.createElement)(e,a)),...Array.isArray(n)?n:[n]])),o=(e,s)=>{let o=(0,t.forwardRef)(({className:o,...i},n)=>(0,t.createElement)(r,{ref:n,iconNode:s,className:l(`lucide-${a(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${e}`,o),...i}));return o.displayName=a(e),o};e.s(["default",()=>o],75254)},7233,e=>{"use strict";let t=(0,e.i(75254).default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.s(["Plus",()=>t],7233)},14764,e=>{"use strict";let t=(0,e.i(75254).default)("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);e.s(["Send",()=>t],14764)},71689,e=>{"use strict";let t=(0,e.i(75254).default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);e.s(["ArrowLeft",()=>t],71689)},28938,e=>{"use strict";e.i(47167);var t=e.i(43476),a=e.i(71645),l=e.i(18566),s=e.i(32341),r=e.i(71689),o=e.i(14764),i=e.i(7233);let n=(0,e.i(75254).default)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function d(){let{token:e}=(0,s.useAuth)(),d=(0,l.useRouter)(),[c,u]=(0,a.useState)(""),[m,x]=(0,a.useState)(""),[p,h]=(0,a.useState)(null),[b,f]=(0,a.useState)({make:"",model:"",yearFrom:"",yearTo:""}),[g,y]=(0,a.useState)(""),[j,v]=(0,a.useState)([]),[w,N]=(0,a.useState)(!1);if(!e)return(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,t.jsxs)("p",{className:"text-slate-600",children:["Please"," ",(0,t.jsx)("a",{href:"/login",className:"text-blue-600 underline",children:"login"})," ","to create a post."]})});function k(){let e=g.trim();e&&(j.includes(e)||v(t=>[...t,e]),y(""))}async function C(t){if(t.preventDefault(),!c.trim())return alert("Title is required");N(!0);try{let t=new FormData;t.append("title",c),t.append("body",m),p&&t.append("image",p),t.append("partTags",JSON.stringify(j)),t.append("vehicleTags",JSON.stringify({make:b.make||void 0,model:b.model||void 0,yearFrom:b.yearFrom?Number(b.yearFrom):void 0,yearTo:b.yearTo?Number(b.yearTo):void 0}));let a=await fetch("http://localhost:3000/api/posts",{method:"POST",headers:{Authorization:`Bearer ${e}`},body:t});if(!a.ok){let e=await a.text();throw Error(e)}d.push("/community")}catch(e){alert("Failed to create post: "+e.message)}finally{N(!1)}}return(0,t.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-white to-slate-100",children:[(0,t.jsx)("div",{className:"bg-gradient-to-r from-blue-900 to-indigo-600 text-white",children:(0,t.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pt-18 pb-2",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("h1",{className:"text-4xl md:text-5xl font-bold mb-2",children:"Community"}),(0,t.jsx)("p",{className:"text-xl text-blue-100 max-w-3xl mx-auto",children:"Share builds, ask questions, and tag parts/vehicles for better discovery."})]})})}),(0,t.jsxs)("div",{className:"max-w-2xl mx-auto mt-4 bg-white rounded-2xl shadow-lg border border-slate-200 p-8",children:[(0,t.jsxs)("button",{onClick:()=>d.back(),className:"inline-flex items-center gap-2 text-slate-600 hover:text-slate-900 mb-6",children:[(0,t.jsx)(r.ArrowLeft,{className:"w-4 h-4"}),"Back"]}),(0,t.jsx)("h1",{className:"text-2xl font-bold text-slate-900 mb-6",children:"Create a New Post"}),(0,t.jsxs)("form",{onSubmit:C,className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Title"}),(0,t.jsx)("input",{type:"text",value:c,onChange:e=>u(e.target.value),className:"w-full rounded-xl border border-slate-300 px-4 py-3 text-slate-900 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"What do you want to ask or share?",required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Body"}),(0,t.jsx)("textarea",{rows:6,value:m,onChange:e=>x(e.target.value),className:"w-full rounded-xl border border-slate-300 px-4 py-3 text-slate-900 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Provide more details here (optional)â€¦"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Image (optional)"}),(0,t.jsx)("input",{type:"file",accept:"image/png,image/jpeg,image/jpg,image/webp",onChange:e=>h(e.target.files?.[0]??null),className:"block w-full text-sm"}),p&&(0,t.jsx)("img",{src:URL.createObjectURL(p),alt:"preview",className:"mt-3 max-h-64 w-full object-cover rounded-xl border"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Vehicle tags"}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,t.jsx)("input",{className:"rounded-xl border border-slate-300 px-4 py-3 text-slate-900 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Make",value:b.make,onChange:e=>f(t=>({...t,make:e.target.value}))}),(0,t.jsx)("input",{className:"rounded-xl border border-slate-300 px-4 py-3 text-slate-900 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Model",value:b.model,onChange:e=>f(t=>({...t,model:e.target.value}))}),(0,t.jsx)("input",{className:"rounded-xl border border-slate-300 px-4 py-3 text-slate-900 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Year From",type:"number",value:b.yearFrom,onChange:e=>f(t=>({...t,yearFrom:e.target.value}))}),(0,t.jsx)("input",{className:"rounded-xl border border-slate-300 px-4 py-3 text-slate-900 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Year To",type:"number",value:b.yearTo,onChange:e=>f(t=>({...t,yearTo:e.target.value}))})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Part tags"}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("input",{className:"flex-1 border border-slate-300 rounded-xl px-4 py-3 text-slate-900 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Type a tag and press Add",value:g,onChange:e=>y(e.target.value),onKeyDown:e=>"Enter"===e.key&&(e.preventDefault(),k())}),(0,t.jsxs)("button",{type:"button",onClick:k,className:"inline-flex border-slate-300 text-amber-50 font-medium bg-blue-600 items-center gap-1 border rounded-xl px-3 py-2 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,t.jsx)(i.Plus,{className:"w-4 h-4"}),"Add"]})]}),j.length>0&&(0,t.jsx)("div",{className:"mt-2 flex flex-wrap gap-2",children:j.map(e=>(0,t.jsxs)("span",{className:"inline-flex items-center gap-2 px-2.5 py-1 rounded-full border bg-slate-50 text-sm",children:[e,(0,t.jsx)("button",{type:"button",onClick:()=>{v(t=>t.filter(t=>t!==e))},className:"text-slate-400 hover:text-slate-600",children:(0,t.jsx)(n,{className:"w-4 h-4"})})]},e))})]}),(0,t.jsx)("button",{type:"submit",disabled:w,className:"w-full inline-flex items-center justify-center gap-2 rounded-xl bg-gradient-to-r from-blue-600 to-purple-600 text-white font-semibold py-3 px-4 shadow-lg hover:shadow-xl transition disabled:opacity-50 disabled:cursor-not-allowed",children:w?(0,t.jsx)("span",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(o.Send,{className:"w-4 h-4"}),"Publish Post"]})})]})]})]})}e.s(["default",()=>d],28938)}]);