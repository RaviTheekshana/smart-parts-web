{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/theek/Documents/DA%20Project/smart-parts/web/src/app/admin/users/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport useSWR from \"swr\";\r\nimport { api } from \"@/lib/api\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { Plus, Edit, Trash2, RefreshCcw } from \"lucide-react\";\r\nimport { useState } from \"react\";\r\n\r\ntype User = {\r\n  _id: string;\r\n  email: string;\r\n  role: string;\r\n  profile?: { name?: string };\r\n  createdAt?: string;\r\n};\r\n\r\nexport default function UsersPage() {\r\n  const [query, setQuery] = useState(\"\");\r\n  const { data, mutate, isLoading } = useSWR<{ users: User[]; total: number }>(\r\n    `/api/admin/users?query=${encodeURIComponent(query)}`,\r\n    api\r\n  );\r\n  const router = useRouter();\r\n\r\n  const users = data?.users || [];\r\n\r\n  async function handleDelete(id: string) {\r\n    if (!confirm(\"Delete this user?\")) return;\r\n    await api(`/api/admin/users/${id}`, { method: \"DELETE\" });\r\n    mutate();\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <div className=\"flex items-center justify-between mb-6\">\r\n        <h1 className=\"text-2xl font-bold text-slate-900\">Users</h1>\r\n        <div className=\"flex gap-2\">\r\n          <input\r\n            value={query}\r\n            onChange={(e) => setQuery(e.target.value)}\r\n            placeholder=\"Search email...\"\r\n            className=\"border rounded-xl px-3 py-2 text-sm\"\r\n          />\r\n          <button\r\n            onClick={() => router.push(\"/admin/users/new\")}\r\n            className=\"inline-flex items-center gap-2 bg-blue-600 hover:bg-blue-700 text-white px-3 py-2 rounded-xl text-sm\"\r\n          >\r\n            <Plus className=\"w-4 h-4\" /> New\r\n          </button>\r\n          <button\r\n            onClick={() => mutate()}\r\n            className=\"inline-flex items-center gap-2 border px-3 py-2 rounded-xl text-sm\"\r\n          >\r\n            <RefreshCcw className=\"w-4 h-4\" /> Refresh\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"overflow-x-auto rounded-xl border border-slate-200 bg-white/70 backdrop-blur\">\r\n        <table className=\"min-w-full text-sm\">\r\n          <thead>\r\n            <tr className=\"border-b border-slate-200 text-left text-slate-600\">\r\n              <th className=\"py-2 px-4\">Email</th>\r\n              <th className=\"py-2 px-4\">Name</th>\r\n              <th className=\"py-2 px-4\">Role</th>\r\n              <th className=\"py-2 px-4\">Created</th>\r\n              <th className=\"py-2 px-4 text-right\">Actions</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {users.map((u) => (\r\n              <tr key={u._id} className=\"border-b border-slate-200 hover:bg-slate-100\">\r\n                <td className=\"py-2 px-4\">{u.email}</td>\r\n                <td className=\"py-2 px-4\">{u.profile?.name ?? \"—\"}</td>\r\n                <td className=\"py-2 px-4 capitalize\">{u.role}</td>\r\n                <td className=\"py-2 px-4\">\r\n                  {u.createdAt ? new Date(u.createdAt).toLocaleDateString() : \"—\"}\r\n                </td>\r\n                <td className=\"py-2 px-4 text-right space-x-2\">\r\n                  <button\r\n                    onClick={() => router.push(`/admin/users/${u._id}`)}\r\n                    className=\"inline-flex items-center text-blue-600 hover:text-blue-800\"\r\n                  >\r\n                    <Edit className=\"w-4 h-4\" />\r\n                  </button>\r\n                  <button\r\n                    onClick={() => handleDelete(u._id)}\r\n                    className=\"inline-flex items-center text-red-600 hover:text-red-800\"\r\n                  >\r\n                    <Trash2 className=\"w-4 h-4\" />\r\n                  </button>\r\n                </td>\r\n              </tr>\r\n            ))}\r\n            {users.length === 0 && !isLoading && (\r\n              <tr><td className=\"py-4 px-4 text-center text-slate-500\" colSpan={5}>No users found</td></tr>\r\n            )}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;;;AANA;;;;;;AAgBe,SAAS;;IACtB,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,yKAAQ,EAAC;IACnC,MAAM,EAAE,IAAI,EAAE,MAAM,EAAE,SAAS,EAAE,GAAG,IAAA,4KAAM,EACxC,AAAC,0BAAmD,OAA1B,mBAAmB,SAC7C,2HAAG;IAEL,MAAM,SAAS,IAAA,kJAAS;IAExB,MAAM,QAAQ,CAAA,iBAAA,2BAAA,KAAM,KAAK,KAAI,EAAE;IAE/B,eAAe,aAAa,EAAU;QACpC,IAAI,CAAC,QAAQ,sBAAsB;QACnC,MAAM,IAAA,2HAAG,EAAC,AAAC,oBAAsB,OAAH,KAAM;YAAE,QAAQ;QAAS;QACvD;IACF;IAEA,qBACE,6LAAC;;0BACC,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAG,WAAU;kCAAoC;;;;;;kCAClD,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCACC,OAAO;gCACP,UAAU,CAAC,IAAM,SAAS,EAAE,MAAM,CAAC,KAAK;gCACxC,aAAY;gCACZ,WAAU;;;;;;0CAEZ,6LAAC;gCACC,SAAS,IAAM,OAAO,IAAI,CAAC;gCAC3B,WAAU;;kDAEV,6LAAC,6MAAI;wCAAC,WAAU;;;;;;oCAAY;;;;;;;0CAE9B,6LAAC;gCACC,SAAS,IAAM;gCACf,WAAU;;kDAEV,6LAAC,mOAAU;wCAAC,WAAU;;;;;;oCAAY;;;;;;;;;;;;;;;;;;;0BAKxC,6LAAC;gBAAI,WAAU;0BACb,cAAA,6LAAC;oBAAM,WAAU;;sCACf,6LAAC;sCACC,cAAA,6LAAC;gCAAG,WAAU;;kDACZ,6LAAC;wCAAG,WAAU;kDAAY;;;;;;kDAC1B,6LAAC;wCAAG,WAAU;kDAAY;;;;;;kDAC1B,6LAAC;wCAAG,WAAU;kDAAY;;;;;;kDAC1B,6LAAC;wCAAG,WAAU;kDAAY;;;;;;kDAC1B,6LAAC;wCAAG,WAAU;kDAAuB;;;;;;;;;;;;;;;;;sCAGzC,6LAAC;;gCACE,MAAM,GAAG,CAAC,CAAC;wCAGmB;wCAAA;yDAF7B,6LAAC;wCAAe,WAAU;;0DACxB,6LAAC;gDAAG,WAAU;0DAAa,EAAE,KAAK;;;;;;0DAClC,6LAAC;gDAAG,WAAU;0DAAa,CAAA,mBAAA,aAAA,EAAE,OAAO,cAAT,iCAAA,WAAW,IAAI,cAAf,6BAAA,kBAAmB;;;;;;0DAC9C,6LAAC;gDAAG,WAAU;0DAAwB,EAAE,IAAI;;;;;;0DAC5C,6LAAC;gDAAG,WAAU;0DACX,EAAE,SAAS,GAAG,IAAI,KAAK,EAAE,SAAS,EAAE,kBAAkB,KAAK;;;;;;0DAE9D,6LAAC;gDAAG,WAAU;;kEACZ,6LAAC;wDACC,SAAS,IAAM,OAAO,IAAI,CAAC,AAAC,gBAAqB,OAAN,EAAE,GAAG;wDAChD,WAAU;kEAEV,cAAA,6LAAC,sNAAI;4DAAC,WAAU;;;;;;;;;;;kEAElB,6LAAC;wDACC,SAAS,IAAM,aAAa,EAAE,GAAG;wDACjC,WAAU;kEAEV,cAAA,6LAAC,uNAAM;4DAAC,WAAU;;;;;;;;;;;;;;;;;;uCAlBf,EAAE,GAAG;;;;;;gCAuBf,MAAM,MAAM,KAAK,KAAK,CAAC,2BACtB,6LAAC;8CAAG,cAAA,6LAAC;wCAAG,WAAU;wCAAuC,SAAS;kDAAG;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAOnF;GAtFwB;;QAEc,4KAAM;QAI3B,kJAAS;;;KANF","debugId":null}}]
}