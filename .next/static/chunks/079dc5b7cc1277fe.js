(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,95468,e=>{"use strict";let s=(0,e.i(75254).default)("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);e.s(["CheckCircle2",()=>s],95468)},78894,e=>{"use strict";let s=(0,e.i(75254).default)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);e.s(["AlertTriangle",()=>s],78894)},59980,e=>{"use strict";e.i(47167);var s=e.i(43476),t=e.i(71645);let l=(0,e.i(75254).default)("cloud-upload",[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]]);var a=e.i(95468),r=e.i(78894);function i(){let[e,i]=(0,t.useState)(null),[c,n]=(0,t.useState)(null),[o,m]=(0,t.useState)(!1),[x,h]=(0,t.useState)(!1);async function p(){if(e){m(!0);try{let s=new FormData;s.append("file",e);let t=await fetch("http://localhost:3000/api/admin/parts/import?dryRun=true",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")||""}`},body:s});if(!t.ok)throw Error(await t.text());let l=await t.json();n(l.preview)}catch(e){alert("Preview failed: "+e.message)}finally{m(!1)}}}async function u(){if(e){m(!0);try{let s=new FormData;s.append("file",e);let t=await fetch("http://localhost:3000/api/admin/parts/import",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")||""}`},body:s});if(!t.ok)throw Error(await t.text());await t.json(),h(!0)}catch(e){alert("Import failed: "+e.message)}finally{m(!1)}}}return(0,s.jsxs)("div",{className:"max-w-3xl",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-slate-900 mb-4",children:"Import Products (CSV)"}),(0,s.jsxs)("div",{className:"bg-white border border-slate-200 rounded-2xl p-6 space-y-4",children:[(0,s.jsxs)("p",{className:"text-slate-600",children:["CSV must include a header row with: ",(0,s.jsx)("code",{className:"font-mono",children:"sku,name,brand,price,locationId,qtyOnHand"}),"."]}),(0,s.jsx)("label",{className:"block",children:(0,s.jsxs)("div",{className:"flex items-center gap-3 border-2 border-dashed border-slate-300 rounded-2xl p-6 text-slate-600 hover:bg-slate-50 cursor-pointer",children:[(0,s.jsx)(l,{className:"w-5 h-5"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"font-medium",children:"Choose CSV file"}),(0,s.jsx)("div",{className:"text-xs text-slate-500",children:"Click to browse"})]}),(0,s.jsx)("input",{type:"file",accept:".csv,text/csv",className:"hidden",onChange:e=>i(e.target.files?.[0]??null)})]})}),e&&(0,s.jsxs)("div",{className:"text-sm text-slate-700",children:["Selected: ",(0,s.jsx)("span",{className:"font-medium",children:e.name})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("button",{onClick:p,disabled:!e||o,className:"px-4 py-2 rounded-xl border hover:bg-slate-50 disabled:opacity-50",children:"Preview (Dry Run)"}),(0,s.jsx)("button",{onClick:u,disabled:!e||!c||o,className:"px-4 py-2 rounded-xl bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-50",children:"Import"})]}),o&&(0,s.jsx)("div",{className:"text-slate-500 text-sm",children:"Processing…"}),x&&(0,s.jsxs)("div",{className:"flex items-center gap-2 text-green-600",children:[(0,s.jsx)(a.CheckCircle2,{className:"w-5 h-5"}),"Import complete!"]}),c&&(0,s.jsxs)("div",{className:"mt-4",children:[(0,s.jsx)("h3",{className:"font-semibold mb-2",children:"Preview"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 text-sm",children:[(0,s.jsx)(d,{label:"Rows",value:c.totalRows}),(0,s.jsx)(d,{label:"Will upsert parts",value:c.willUpsertParts}),(0,s.jsx)(d,{label:"Will upsert inventories",value:c.willUpsertInventories})]}),c.errors.length>0&&(0,s.jsxs)("div",{className:"mt-4 rounded-xl border border-amber-300 bg-amber-50 p-4 text-amber-800",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 font-semibold mb-2",children:[(0,s.jsx)(r.AlertTriangle,{className:"w-5 h-5"})," Errors"]}),(0,s.jsxs)("ul",{className:"list-disc pl-6 text-sm",children:[c.errors.slice(0,10).map((e,t)=>(0,s.jsxs)("li",{children:["Row ",e.row,": ",e.msg]},t)),c.errors.length>10&&(0,s.jsxs)("li",{children:["+ ",c.errors.length-10," more…"]})]})]}),(0,s.jsxs)("div",{className:"mt-4",children:[(0,s.jsx)("div",{className:"text-sm font-medium mb-1",children:"Sample (first 5 rows)"}),(0,s.jsx)("div",{className:"overflow-x-auto rounded-xl border border-slate-200",children:(0,s.jsxs)("table",{className:"min-w-full text-sm bg-white",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"border-b border-slate-200 text-left text-slate-600",children:[(0,s.jsx)("th",{className:"py-2 px-3",children:"sku"}),(0,s.jsx)("th",{className:"py-2 px-3",children:"name"}),(0,s.jsx)("th",{className:"py-2 px-3",children:"brand"}),(0,s.jsx)("th",{className:"py-2 px-3",children:"price"}),(0,s.jsx)("th",{className:"py-2 px-3",children:"locationId"}),(0,s.jsx)("th",{className:"py-2 px-3",children:"qtyOnHand"})]})}),(0,s.jsx)("tbody",{children:c.sample.map((e,t)=>(0,s.jsxs)("tr",{className:"border-b border-slate-200",children:[(0,s.jsx)("td",{className:"py-2 px-3 font-mono",children:e.sku}),(0,s.jsx)("td",{className:"py-2 px-3",children:e.name}),(0,s.jsx)("td",{className:"py-2 px-3",children:e.brand}),(0,s.jsx)("td",{className:"py-2 px-3",children:e.price}),(0,s.jsx)("td",{className:"py-2 px-3",children:e.locationId}),(0,s.jsx)("td",{className:"py-2 px-3",children:e.qtyOnHand})]},t))})]})})]})]})]})]})}function d({label:e,value:t}){return(0,s.jsxs)("div",{className:"rounded-xl border border-slate-200 bg-white p-3",children:[(0,s.jsx)("div",{className:"text-xs text-slate-500",children:e}),(0,s.jsx)("div",{className:"text-lg font-semibold",children:t})]})}e.s(["default",()=>i],59980)}]);