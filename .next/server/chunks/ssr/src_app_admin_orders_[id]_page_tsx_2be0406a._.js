module.exports=[14189,a=>{"use strict";var b=a.i(87924),c=a.i(72596),d=a.i(19032),e=a.i(50944),f=a.i(72131);function g(){let{id:a}=(0,e.useParams)(),g=(0,e.useRouter)(),{data:i,mutate:j}=(0,c.default)(`/api/admin/orders/${a}`,d.api),[k,l]=(0,f.useState)(!1),m=i?.order,n=a=>"number"==typeof a?new Intl.NumberFormat(void 0,{style:"currency",currency:"LKR"}).format(a):"-";async function o(b){l(!0);try{await (0,d.api)(`/api/admin/orders/${a}/status`,{method:"PATCH",body:JSON.stringify({status:b})}),await j()}finally{l(!1)}}async function p(){if(confirm("Issue Stripe refund and cancel order?")){l(!0);try{await (0,d.api)(`/api/admin/orders/${a}/refund`,{method:"POST"}),await j()}finally{l(!1)}}}return m?(0,b.jsxs)("div",{className:"space-y-6 max-w-4xl",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("h1",{className:"text-2xl font-bold text-slate-900",children:["Order #",m._id.slice(-6).toUpperCase()]}),(0,b.jsx)("button",{className:"border rounded-xl px-3 py-1",onClick:()=>g.push("/admin/orders"),children:"Back"})]}),(0,b.jsxs)("div",{className:"bg-white border border-slate-200 rounded-2xl p-6 space-y-4",children:[(0,b.jsxs)("div",{className:"flex flex-wrap items-center gap-3",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-xs text-slate-500",children:"Status"}),(0,b.jsx)("div",{className:"text-base font-semibold capitalize",children:m.status})]}),(0,b.jsxs)("select",{className:"border rounded-xl px-3 py-2 text-sm",onChange:a=>o(a.target.value),defaultValue:"",children:[(0,b.jsx)("option",{value:"",disabled:!0,children:"Update status…"}),(0,b.jsx)("option",{value:"pending",children:"pending"}),(0,b.jsx)("option",{value:"paid",children:"paid"}),(0,b.jsx)("option",{value:"fulfilled",children:"fulfilled"}),(0,b.jsx)("option",{value:"cancelled",children:"cancelled"})]}),m.payment?.provider==="stripe"&&"cancelled"!==m.status&&(0,b.jsx)("button",{onClick:p,disabled:k,className:"ml-auto bg-red-600 text-white px-3 py-2 rounded-xl hover:bg-red-700",children:"Refund (Stripe)"})]}),(0,b.jsx)("div",{className:"overflow-x-auto rounded-xl border border-slate-200",children:(0,b.jsxs)("table",{className:"min-w-full text-sm bg-white",children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{className:"border-b border-slate-200 text-left text-slate-600",children:[(0,b.jsx)("th",{className:"py-2 px-4",children:"SKU"}),(0,b.jsx)("th",{className:"py-2 px-4",children:"Name"}),(0,b.jsx)("th",{className:"py-2 px-4",children:"Qty"}),(0,b.jsx)("th",{className:"py-2 px-4",children:"Unit"}),(0,b.jsx)("th",{className:"py-2 px-4",children:"Location"}),(0,b.jsx)("th",{className:"py-2 px-4",children:"Line"})]})}),(0,b.jsxs)("tbody",{children:[m.items.map((a,c)=>(0,b.jsxs)("tr",{className:"border-b border-slate-200",children:[(0,b.jsx)("td",{className:"py-2 px-4 font-mono",children:a.sku??"—"}),(0,b.jsx)("td",{className:"py-2 px-4",children:a.name??"—"}),(0,b.jsx)("td",{className:"py-2 px-4",children:a.qty}),(0,b.jsx)("td",{className:"py-2 px-4",children:n(a.priceAtOrder)}),(0,b.jsx)("td",{className:"py-2 px-4",children:a.locationId??"—"}),(0,b.jsx)("td",{className:"py-2 px-4",children:n((a.priceAtOrder??0)*a.qty)})]},c)),0===m.items.length&&(0,b.jsx)("tr",{children:(0,b.jsx)("td",{className:"py-4 px-4 text-center text-slate-500",colSpan:6,children:"No items"})})]})]})}),(0,b.jsxs)("div",{className:"grid sm:grid-cols-3 gap-3",children:[(0,b.jsx)(h,{label:"Subtotal",value:n(m.totals?.subtotal)}),(0,b.jsx)(h,{label:"Tax",value:n(m.totals?.tax)}),(0,b.jsx)(h,{label:"Grand Total",value:n(m.totals?.grand)})]}),(0,b.jsxs)("div",{className:"text-sm text-slate-600",children:["Payment: ",m.payment?.provider??"—"," • ",m.payment?.status??"—",(0,b.jsx)("br",{}),"Placed: ",m.createdAt?new Date(m.createdAt).toLocaleString():"—"]})]})]}):(0,b.jsx)("div",{children:"Loading…"})}function h({label:a,value:c}){return(0,b.jsxs)("div",{className:"rounded-xl border border-slate-200 bg-white p-4",children:[(0,b.jsx)("div",{className:"text-xs text-slate-500",children:a}),(0,b.jsx)("div",{className:"text-lg font-semibold",children:c})]})}a.s(["default",()=>g])}];

//# sourceMappingURL=src_app_admin_orders_%5Bid%5D_page_tsx_2be0406a._.js.map