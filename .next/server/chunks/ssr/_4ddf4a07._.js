module.exports=[67453,a=>{"use strict";let b=(0,a.i(70106).default)("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);a.s(["CheckCircle2",()=>b],67453)},73570,a=>{"use strict";let b=(0,a.i(70106).default)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);a.s(["AlertTriangle",()=>b],73570)},69309,a=>{"use strict";var b=a.i(87924),c=a.i(72131);let d=(0,a.i(70106).default)("cloud-upload",[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]]);var e=a.i(67453),f=a.i(73570);function g(){let[a,g]=(0,c.useState)(null),[i,j]=(0,c.useState)(null),[k,l]=(0,c.useState)(!1),[m,n]=(0,c.useState)(!1);async function o(){if(a){l(!0);try{let b=new FormData;b.append("file",a);let c=await fetch("http://localhost:3000/api/admin/parts/import?dryRun=true",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")||""}`},body:b});if(!c.ok)throw Error(await c.text());let d=await c.json();j(d.preview)}catch(a){alert("Preview failed: "+a.message)}finally{l(!1)}}}async function p(){if(a){l(!0);try{let b=new FormData;b.append("file",a);let c=await fetch("http://localhost:3000/api/admin/parts/import",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")||""}`},body:b});if(!c.ok)throw Error(await c.text());await c.json(),n(!0)}catch(a){alert("Import failed: "+a.message)}finally{l(!1)}}}return(0,b.jsxs)("div",{className:"max-w-3xl",children:[(0,b.jsx)("h1",{className:"text-2xl font-bold text-slate-900 mb-4",children:"Import Products (CSV)"}),(0,b.jsxs)("div",{className:"bg-white border border-slate-200 rounded-2xl p-6 space-y-4",children:[(0,b.jsxs)("p",{className:"text-slate-600",children:["CSV must include a header row with: ",(0,b.jsx)("code",{className:"font-mono",children:"sku,name,brand,price,locationId,qtyOnHand"}),"."]}),(0,b.jsx)("label",{className:"block",children:(0,b.jsxs)("div",{className:"flex items-center gap-3 border-2 border-dashed border-slate-300 rounded-2xl p-6 text-slate-600 hover:bg-slate-50 cursor-pointer",children:[(0,b.jsx)(d,{className:"w-5 h-5"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"font-medium",children:"Choose CSV file"}),(0,b.jsx)("div",{className:"text-xs text-slate-500",children:"Click to browse"})]}),(0,b.jsx)("input",{type:"file",accept:".csv,text/csv",className:"hidden",onChange:a=>g(a.target.files?.[0]??null)})]})}),a&&(0,b.jsxs)("div",{className:"text-sm text-slate-700",children:["Selected: ",(0,b.jsx)("span",{className:"font-medium",children:a.name})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)("button",{onClick:o,disabled:!a||k,className:"px-4 py-2 rounded-xl border hover:bg-slate-50 disabled:opacity-50",children:"Preview (Dry Run)"}),(0,b.jsx)("button",{onClick:p,disabled:!a||!i||k,className:"px-4 py-2 rounded-xl bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-50",children:"Import"})]}),k&&(0,b.jsx)("div",{className:"text-slate-500 text-sm",children:"Processing…"}),m&&(0,b.jsxs)("div",{className:"flex items-center gap-2 text-green-600",children:[(0,b.jsx)(e.CheckCircle2,{className:"w-5 h-5"}),"Import complete!"]}),i&&(0,b.jsxs)("div",{className:"mt-4",children:[(0,b.jsx)("h3",{className:"font-semibold mb-2",children:"Preview"}),(0,b.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 text-sm",children:[(0,b.jsx)(h,{label:"Rows",value:i.totalRows}),(0,b.jsx)(h,{label:"Will upsert parts",value:i.willUpsertParts}),(0,b.jsx)(h,{label:"Will upsert inventories",value:i.willUpsertInventories})]}),i.errors.length>0&&(0,b.jsxs)("div",{className:"mt-4 rounded-xl border border-amber-300 bg-amber-50 p-4 text-amber-800",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 font-semibold mb-2",children:[(0,b.jsx)(f.AlertTriangle,{className:"w-5 h-5"})," Errors"]}),(0,b.jsxs)("ul",{className:"list-disc pl-6 text-sm",children:[i.errors.slice(0,10).map((a,c)=>(0,b.jsxs)("li",{children:["Row ",a.row,": ",a.msg]},c)),i.errors.length>10&&(0,b.jsxs)("li",{children:["+ ",i.errors.length-10," more…"]})]})]}),(0,b.jsxs)("div",{className:"mt-4",children:[(0,b.jsx)("div",{className:"text-sm font-medium mb-1",children:"Sample (first 5 rows)"}),(0,b.jsx)("div",{className:"overflow-x-auto rounded-xl border border-slate-200",children:(0,b.jsxs)("table",{className:"min-w-full text-sm bg-white",children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{className:"border-b border-slate-200 text-left text-slate-600",children:[(0,b.jsx)("th",{className:"py-2 px-3",children:"sku"}),(0,b.jsx)("th",{className:"py-2 px-3",children:"name"}),(0,b.jsx)("th",{className:"py-2 px-3",children:"brand"}),(0,b.jsx)("th",{className:"py-2 px-3",children:"price"}),(0,b.jsx)("th",{className:"py-2 px-3",children:"locationId"}),(0,b.jsx)("th",{className:"py-2 px-3",children:"qtyOnHand"})]})}),(0,b.jsx)("tbody",{children:i.sample.map((a,c)=>(0,b.jsxs)("tr",{className:"border-b border-slate-200",children:[(0,b.jsx)("td",{className:"py-2 px-3 font-mono",children:a.sku}),(0,b.jsx)("td",{className:"py-2 px-3",children:a.name}),(0,b.jsx)("td",{className:"py-2 px-3",children:a.brand}),(0,b.jsx)("td",{className:"py-2 px-3",children:a.price}),(0,b.jsx)("td",{className:"py-2 px-3",children:a.locationId}),(0,b.jsx)("td",{className:"py-2 px-3",children:a.qtyOnHand})]},c))})]})})]})]})]})]})}function h({label:a,value:c}){return(0,b.jsxs)("div",{className:"rounded-xl border border-slate-200 bg-white p-3",children:[(0,b.jsx)("div",{className:"text-xs text-slate-500",children:a}),(0,b.jsx)("div",{className:"text-lg font-semibold",children:c})]})}a.s(["default",()=>g],69309)}];

//# sourceMappingURL=_4ddf4a07._.js.map