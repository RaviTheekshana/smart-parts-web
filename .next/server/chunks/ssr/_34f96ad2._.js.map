{"version":3,"sources":["../../../../node_modules/lucide-react/src/icons/refresh-ccw.ts","../../../../src/app/admin/orders/page.tsx"],"sourcesContent":["import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8', key: '14sxne' }],\n  ['path', { d: 'M3 3v5h5', key: '1xhq8a' }],\n  ['path', { d: 'M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16', key: '1hlbsb' }],\n  ['path', { d: 'M16 16h5v5', key: 'ccwih5' }],\n];\n\n/**\n * @component @name RefreshCcw\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMjEgMTJhOSA5IDAgMCAwLTktOSA5Ljc1IDkuNzUgMCAwIDAtNi43NCAyLjc0TDMgOCIgLz4KICA8cGF0aCBkPSJNMyAzdjVoNSIgLz4KICA8cGF0aCBkPSJNMyAxMmE5IDkgMCAwIDAgOSA5IDkuNzUgOS43NSAwIDAgMCA2Ljc0LTIuNzRMMjEgMTYiIC8+CiAgPHBhdGggZD0iTTE2IDE2aDV2NSIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/refresh-ccw\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst RefreshCcw = createLucideIcon('refresh-ccw', __iconNode);\n\nexport default RefreshCcw;\n","\"use client\";\r\n\r\nimport useSWR from \"swr\";\r\nimport { api } from \"@/lib/api\";\r\nimport { useState } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { RefreshCcw } from \"lucide-react\";\r\n\r\ntype Row = {\r\n  _id: string;\r\n  userEmail?: string;\r\n  status: string;\r\n  grand: number;\r\n  createdAt?: string;\r\n};\r\n\r\nexport default function AdminOrdersPage() {\r\n  const router = useRouter();\r\n  const [query, setQuery] = useState(\"\");\r\n  const [status, setStatus] = useState(\"\");\r\n  const [page, setPage] = useState(1);\r\n  const [limit, setLimit] = useState(20);\r\n\r\n  const { data, isLoading, mutate } = useSWR<{\r\n    orders: Row[]; total: number; page: number; pageSize: number; totalPages: number;\r\n  }>(\r\n    `/api/admin/orders?query=${encodeURIComponent(query)}&status=${status}&page=${page}&limit=${limit}`,\r\n    api\r\n  );\r\n\r\n  const orders = data?.orders ?? [];\r\n  const totalPages = data?.totalPages ?? 1;\r\n\r\n  const fmtMoney = (n: number) =>\r\n    new Intl.NumberFormat(undefined, { style: \"currency\", currency: \"LKR\" }).format(n ?? 0);\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div className=\"flex items-center justify-between\">\r\n        <h1 className=\"text-2xl font-bold text-slate-900\">Orders</h1>\r\n        <div className=\"flex gap-2\">\r\n          <input\r\n            className=\"border rounded-xl px-3 py-2 text-sm\"\r\n            placeholder=\"Search email or id…\"\r\n            value={query}\r\n            onChange={(e) => { setQuery(e.target.value); setPage(1); }}\r\n          />\r\n          <select\r\n            value={status}\r\n            onChange={(e) => { setStatus(e.target.value); setPage(1); }}\r\n            className=\"border rounded-xl px-3 py-2 text-sm\"\r\n          >\r\n            <option value=\"\">All statuses</option>\r\n            <option value=\"pending\">pending</option>\r\n            <option value=\"paid\">paid</option>\r\n            <option value=\"fulfilled\">fulfilled</option>\r\n            <option value=\"cancelled\">cancelled</option>\r\n          </select>\r\n          <button\r\n            onClick={() => mutate()}\r\n            className=\"inline-flex items-center gap-2 border px-3 py-2 rounded-xl text-sm\"\r\n          >\r\n            <RefreshCcw className=\"w-4 h-4\" /> Refresh\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"overflow-x-auto rounded-xl border border-slate-200 bg-white\">\r\n        <table className=\"min-w-full text-sm\">\r\n          <thead>\r\n            <tr className=\"border-b border-slate-200 text-left text-slate-600\">\r\n              <th className=\"py-2 px-4\">Order</th>\r\n              <th className=\"py-2 px-4\">Customer</th>\r\n              <th className=\"py-2 px-4\">Status</th>\r\n              <th className=\"py-2 px-4\">Total</th>\r\n              <th className=\"py-2 px-4\">Created</th>\r\n              <th className=\"py-2 px-4 text-right\">Actions</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {orders.map((o) => (\r\n              <tr key={o._id} className=\"border-b border-slate-200\">\r\n                <td className=\"py-2 px-4 font-mono\">{o._id.slice(-6).toUpperCase()}</td>\r\n                <td className=\"py-2 px-4\">{o.userEmail ?? \"—\"}</td>\r\n                <td className=\"py-2 px-4 capitalize\">{o.status}</td>\r\n                <td className=\"py-2 px-4\">{fmtMoney(o.grand)}</td>\r\n                <td className=\"py-2 px-4\">{o.createdAt ? new Date(o.createdAt).toLocaleString() : \"—\"}</td>\r\n                <td className=\"py-2 px-4 text-right\">\r\n                  <button\r\n                    onClick={() => router.push(`/admin/orders/${o._id}`)}\r\n                    className=\"text-blue-600 hover:text-blue-800\"\r\n                  >\r\n                    View\r\n                  </button>\r\n                </td>\r\n              </tr>\r\n            ))}\r\n            {!isLoading && orders.length === 0 && (\r\n              <tr><td className=\"py-4 px-4 text-center text-slate-500\" colSpan={6}>No orders</td></tr>\r\n            )}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n\r\n      {/* pagination */}\r\n      <div className=\"mt-4 flex items-center justify-between\">\r\n        <div className=\"text-sm text-slate-600\">\r\n          Page {data?.page ?? 1} / {totalPages} • {data?.total ?? 0} results\r\n        </div>\r\n        <div className=\"flex items-center gap-2\">\r\n          <select\r\n            value={limit}\r\n            onChange={(e) => { setLimit(Number(e.target.value)); setPage(1); }}\r\n            className=\"border rounded-xl px-2 py-1 text-sm\"\r\n          >\r\n            {[10,20,50,100].map(n => <option key={n} value={n}>{n} / page</option>)}\r\n          </select>\r\n          <button\r\n            className=\"border rounded-xl px-3 py-1 disabled:opacity-50\"\r\n            disabled={page <= 1}\r\n            onClick={() => setPage(p => Math.max(1, p - 1))}\r\n          >\r\n            Prev\r\n          </button>\r\n          <button\r\n            className=\"border rounded-xl px-3 py-1 disabled:opacity-50\"\r\n            disabled={page >= totalPages}\r\n            onClick={() => setPage(p => Math.min(totalPages, p + 1))}\r\n          >\r\n            Next\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","ignoreList":[0]}