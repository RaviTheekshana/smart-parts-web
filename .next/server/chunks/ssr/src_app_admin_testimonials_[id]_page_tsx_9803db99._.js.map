{"version":3,"sources":["../../../../src/app/admin/testimonials/%5Bid%5D/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport useSWR from \"swr\";\r\nimport { api } from \"@/lib/api\";\r\nimport { useParams, useRouter } from \"next/navigation\";\r\nimport { useEffect, useState } from \"react\";\r\n\r\nexport default function AdminTestimonialEdit() {\r\n  const { id } = useParams() as { id: string };\r\n  const router = useRouter();\r\n  const { data, mutate } = useSWR<{ testimonial: any }>(`/api/admin/testimonials/${id}`, api);\r\n\r\n  const [rating, setRating] = useState(5);\r\n  const [title, setTitle] = useState(\"\");\r\n  const [body, setBody] = useState(\"\");\r\n  const [published, setPublished] = useState(true);\r\n\r\n  useEffect(() => {\r\n    const t = data?.testimonial;\r\n    if (!t) return;\r\n    setRating(t.rating ?? 5);\r\n    setTitle(t.title ?? \"\");\r\n    setBody(t.body ?? \"\");\r\n    setPublished(!!t.published);\r\n  }, [data]);\r\n\r\n  async function save(e: React.FormEvent) {\r\n    e.preventDefault();\r\n    await api(`/api/admin/testimonials/${id}`, {\r\n      method: \"PATCH\",\r\n      body: JSON.stringify({ rating, title, body, published }),\r\n    });\r\n    await mutate();\r\n    router.push(\"/admin/testimonials\");\r\n  }\r\n\r\n  if (!data) return <div>Loading…</div>;\r\n\r\n  return (\r\n    <div className=\"max-w-3xl\">\r\n      <h1 className=\"text-2xl font-bold mb-4 text-slate-900\">Edit Testimonial</h1>\r\n      <form onSubmit={save} className=\"space-y-4 bg-white border border-slate-200 rounded-2xl p-6\">\r\n        <div className=\"grid grid-cols-2 gap-3\">\r\n          <label className=\"text-sm text-slate-600\">Rating</label>\r\n          <select className=\"border rounded-xl px-3 py-2\" value={rating} onChange={(e)=>setRating(Number(e.target.value))}>\r\n            {[5,4,3,2,1].map(n => <option key={n} value={n}>{n}★</option>)}\r\n          </select>\r\n        </div>\r\n        <input className=\"w-full border rounded-xl px-3 py-2\" placeholder=\"Title\" value={title} onChange={(e)=>setTitle(e.target.value)} maxLength={120} />\r\n        <textarea className=\"w-full border rounded-xl px-3 py-2 min-h-[120px]\" placeholder=\"Body\" value={body} onChange={(e)=>setBody(e.target.value)} maxLength={2000} />\r\n        <div className=\"flex items-center gap-2\">\r\n          <input id=\"pub\" type=\"checkbox\" checked={published} onChange={(e)=>setPublished(e.target.checked)} />\r\n          <label htmlFor=\"pub\" className=\"text-sm\">Published (visible on public sections)</label>\r\n        </div>\r\n        <button className=\"w-full bg-blue-600 hover:bg-blue-700 text-white py-2 rounded-xl\">Save</button>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}