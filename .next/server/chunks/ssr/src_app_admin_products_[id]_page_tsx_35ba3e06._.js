module.exports=[69434,a=>{"use strict";var b=a.i(87924),c=a.i(72596),d=a.i(19032),e=a.i(50944),f=a.i(72131);function g(){let{id:a}=(0,e.useParams)(),g=(0,e.useRouter)(),{data:i,mutate:j}=(0,c.default)(`/api/admin/parts/${a}`,d.api),{data:k,mutate:l}=(0,c.default)(`/api/admin/parts/${a}/inventories`,d.api),{data:m,mutate:n}=(0,c.default)(`/api/admin/parts/${a}/fitments`,d.api),[o,p]=(0,f.useState)("details"),[q,r]=(0,f.useState)(""),[s,t]=(0,f.useState)(""),[u,v]=(0,f.useState)(""),[w,x]=(0,f.useState)("");async function y(b){b.preventDefault(),await (0,d.api)(`/api/admin/parts/${a}`,{method:"PATCH",body:JSON.stringify({sku:q,name:s,brand:u,price:Number(w||0)})}),j(),g.push("/admin/products")}(0,f.useEffect)(()=>{let a=i?.part;a&&(r(a.sku||""),t(a.name||""),v(a.brand||""),x(a.price??""))},[i]);let z=k?.inventories??[],[A,B]=(0,f.useState)(""),[C,D]=(0,f.useState)(""),[E,F]=(0,f.useState)("");async function G(){await (0,d.api)(`/api/admin/parts/${a}/inventories`,{method:"PUT",body:JSON.stringify({locationId:A,qtyOnHand:Number(C||0),eta:E||null})}),B(""),D(""),F(""),l()}async function H(b){confirm(`Delete inventory for ${b}?`)&&(await (0,d.api)(`/api/admin/parts/${a}/inventories/${b}`,{method:"DELETE"}),l())}let I=m?.fitments??[],[J,K]=(0,f.useState)(""),[L,M]=(0,f.useState)(""),[N,O]=(0,f.useState)(""),[P,Q]=(0,f.useState)(""),[R,S]=(0,f.useState)("");async function T(){await (0,d.api)(`/api/admin/parts/${a}/fitments`,{method:"POST",body:JSON.stringify({make:J,model:L,yearFrom:Number(N||0),yearTo:Number(P||N||0),notes:R})}),K(""),M(""),O(""),Q(""),S(""),n()}async function U(b){confirm("Delete fitment?")&&(await (0,d.api)(`/api/admin/parts/${a}/fitments/${b}`,{method:"DELETE"}),n())}return i?(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)("h1",{className:"text-2xl font-bold text-slate-900",children:"Edit Product"}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)("button",{className:h("details"===o),onClick:()=>p("details"),children:"Details"}),(0,b.jsx)("button",{className:h("inventories"===o),onClick:()=>p("inventories"),children:"Inventories"}),(0,b.jsx)("button",{className:h("fitments"===o),onClick:()=>p("fitments"),children:"Fitments"})]}),"details"===o&&(0,b.jsxs)("form",{onSubmit:y,className:"space-y-4 bg-white border border-slate-200 rounded-2xl p-6",children:[(0,b.jsx)("input",{className:"w-full border rounded-xl px-3 py-2",placeholder:"SKU",value:q,onChange:a=>r(a.target.value)}),(0,b.jsx)("input",{className:"w-full border rounded-xl px-3 py-2",placeholder:"Name",value:s,onChange:a=>t(a.target.value)}),(0,b.jsx)("input",{className:"w-full border rounded-xl px-3 py-2",placeholder:"Brand",value:u,onChange:a=>v(a.target.value)}),(0,b.jsx)("input",{className:"w-full border rounded-xl px-3 py-2",placeholder:"Price",type:"number",value:w,onChange:a=>x(a.target.value)}),(0,b.jsx)("button",{className:"w-full bg-blue-600 hover:bg-blue-700 text-white py-2 rounded-xl",children:"Save"})]}),"inventories"===o&&(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("div",{className:"bg-white border border-slate-200 rounded-2xl p-6",children:(0,b.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-3",children:[(0,b.jsx)("input",{className:"border rounded-xl px-3 py-2",placeholder:"Location ID",value:A,onChange:a=>B(a.target.value)}),(0,b.jsx)("input",{className:"border rounded-xl px-3 py-2",placeholder:"Qty On Hand",type:"number",value:C,onChange:a=>D(a.target.value)}),(0,b.jsx)("input",{className:"border rounded-xl px-3 py-2",placeholder:"ETA (optional)",value:E,onChange:a=>F(a.target.value)}),(0,b.jsx)("button",{onClick:G,className:"bg-blue-600 text-white rounded-xl px-3 py-2",children:"Upsert"})]})}),(0,b.jsx)("div",{className:"overflow-x-auto rounded-xl border border-slate-200 bg-white",children:(0,b.jsxs)("table",{className:"min-w-full text-sm",children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{className:"border-b border-slate-200 text-left text-slate-600",children:[(0,b.jsx)("th",{className:"py-2 px-4",children:"Location"}),(0,b.jsx)("th",{className:"py-2 px-4",children:"On Hand"}),(0,b.jsx)("th",{className:"py-2 px-4",children:"Reserved"}),(0,b.jsx)("th",{className:"py-2 px-4",children:"ETA"}),(0,b.jsx)("th",{className:"py-2 px-4 text-right",children:"Actions"})]})}),(0,b.jsxs)("tbody",{children:[z.map(a=>(0,b.jsxs)("tr",{className:"border-b border-slate-200",children:[(0,b.jsx)("td",{className:"py-2 px-4",children:a.locationId}),(0,b.jsx)("td",{className:"py-2 px-4",children:a.qtyOnHand}),(0,b.jsx)("td",{className:"py-2 px-4",children:a.qtyReserved??0}),(0,b.jsx)("td",{className:"py-2 px-4",children:a.eta??"—"}),(0,b.jsx)("td",{className:"py-2 px-4 text-right",children:(0,b.jsx)("button",{onClick:()=>H(a.locationId),className:"text-red-600 hover:text-red-800",children:"Delete"})})]},a._id)),0===z.length&&(0,b.jsx)("tr",{children:(0,b.jsx)("td",{className:"py-4 px-4 text-center text-slate-500",colSpan:5,children:"No inventory rows."})})]})]})})]}),"fitments"===o&&(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"bg-white border border-slate-200 rounded-2xl p-6",children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-3",children:[(0,b.jsx)("input",{className:"border rounded-xl px-3 py-2",placeholder:"Make",value:J,onChange:a=>K(a.target.value)}),(0,b.jsx)("input",{className:"border rounded-xl px-3 py-2",placeholder:"Model",value:L,onChange:a=>M(a.target.value)}),(0,b.jsx)("input",{className:"border rounded-xl px-3 py-2",placeholder:"Year From",type:"number",value:N,onChange:a=>O(a.target.value)}),(0,b.jsx)("input",{className:"border rounded-xl px-3 py-2",placeholder:"Year To",type:"number",value:P,onChange:a=>Q(a.target.value)}),(0,b.jsx)("button",{onClick:T,className:"bg-blue-600 text-white rounded-xl px-3 py-2",children:"Add"})]}),(0,b.jsx)("input",{className:"mt-3 w-full border rounded-xl px-3 py-2",placeholder:"Notes (optional)",value:R,onChange:a=>S(a.target.value)})]}),(0,b.jsx)("div",{className:"overflow-x-auto rounded-xl border border-slate-200 bg-white",children:(0,b.jsxs)("table",{className:"min-w-full text-sm",children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{className:"border-b border-slate-200 text-left text-slate-600",children:[(0,b.jsx)("th",{className:"py-2 px-4",children:"Make"}),(0,b.jsx)("th",{className:"py-2 px-4",children:"Model"}),(0,b.jsx)("th",{className:"py-2 px-4",children:"Years"}),(0,b.jsx)("th",{className:"py-2 px-4",children:"Notes"}),(0,b.jsx)("th",{className:"py-2 px-4 text-right",children:"Actions"})]})}),(0,b.jsxs)("tbody",{children:[I.map(a=>(0,b.jsxs)("tr",{className:"border-b border-slate-200",children:[(0,b.jsx)("td",{className:"py-2 px-4",children:a.make}),(0,b.jsx)("td",{className:"py-2 px-4",children:a.model}),(0,b.jsx)("td",{className:"py-2 px-4",children:[a.yearFrom,a.yearTo].filter(Boolean).join("–")||"—"}),(0,b.jsx)("td",{className:"py-2 px-4",children:a.notes??"—"}),(0,b.jsx)("td",{className:"py-2 px-4 text-right",children:(0,b.jsx)("button",{onClick:()=>U(a._id),className:"text-red-600 hover:text-red-800",children:"Delete"})})]},a._id)),0===I.length&&(0,b.jsx)("tr",{children:(0,b.jsx)("td",{className:"py-4 px-4 text-center text-slate-500",colSpan:5,children:"No fitments yet."})})]})]})})]})]}):(0,b.jsx)("div",{children:"Loading…"})}function h(a){return`px-3 py-1.5 rounded-xl border ${a?"bg-slate-900 text-white":"bg-white hover:bg-slate-50"}`}a.s(["default",()=>g])}];

//# sourceMappingURL=src_app_admin_products_%5Bid%5D_page_tsx_35ba3e06._.js.map