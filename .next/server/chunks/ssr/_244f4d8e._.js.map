{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/theek/Documents/DA%20Project/smart-parts/web/src/app/community/new/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useRouter } from \"next/navigation\";\r\nimport { useState } from \"react\";\r\nimport { useAuth } from \"@/context/AuthContext\";\r\n\r\nexport default function NewPostPage() {\r\n  const { token } = useAuth();\r\n  const router = useRouter();\r\n\r\n  const [title, setTitle] = useState(\"\");\r\n  const [body, setBody] = useState(\"\");\r\n  const [image, setImage] = useState<File | null>(null);\r\n\r\n  // tags\r\n  const [partInput, setPartInput] = useState(\"\");\r\n  const [partTags, setPartTags] = useState<string[]>([]);\r\n  const [vehicle, setVehicle] = useState({ make: \"\", model: \"\", yearFrom: \"\", yearTo: \"\" });\r\n\r\n  if (!token) {\r\n    // lightweight guard\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center p-10\">\r\n        <div className=\"text-center\">\r\n          <p className=\"text-slate-700\">Please <a className=\"text-blue-600 underline\" href=\"/login\">login</a> to post.</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  function addPartTag() {\r\n    const v = partInput.trim();\r\n    if (!v) return;\r\n    if (!partTags.includes(v)) setPartTags([...partTags, v]);\r\n    setPartInput(\"\");\r\n  }\r\n  function removePartTag(tag: string) {\r\n    setPartTags(partTags.filter((t) => t !== tag));\r\n  }\r\n\r\n  async function submit(e: React.FormEvent) {\r\n    e.preventDefault();\r\n    const form = new FormData();\r\n    form.append(\"title\", title);\r\n    form.append(\"body\", body);\r\n    if (image) form.append(\"image\", image);\r\n    form.append(\"partTags\", JSON.stringify(partTags));\r\n    form.append(\"vehicleTags\", JSON.stringify({\r\n      make: vehicle.make || undefined,\r\n      model: vehicle.model || undefined,\r\n      yearFrom: vehicle.yearFrom ? Number(vehicle.yearFrom) : undefined,\r\n      yearTo: vehicle.yearTo ? Number(vehicle.yearTo) : undefined,\r\n    }));\r\n\r\n    const res = await fetch(`${process.env.NEXT_PUBLIC_API}/api/posts`, {\r\n      method: \"POST\",\r\n      headers: { Authorization: `Bearer ${token}` },\r\n      body: form,\r\n    });\r\n    if (!res.ok) {\r\n      const msg = await res.text();\r\n      alert(\"Failed: \" + msg);\r\n      return;\r\n    }\r\n    router.push(\"/community\");\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-slate-50 p-6\">\r\n      <div className=\"max-w-2xl mx-auto bg-white border border-slate-200 rounded-2xl p-6\">\r\n        <h1 className=\"text-2xl font-bold mb-4 text-slate-900\">Create Post</h1>\r\n        <form onSubmit={submit} className=\"space-y-4\">\r\n          <input\r\n            className=\"w-full border rounded-xl px-3 py-2\"\r\n            placeholder=\"Title\"\r\n            value={title}\r\n            onChange={(e) => setTitle(e.target.value)}\r\n            required\r\n          />\r\n          <textarea\r\n            className=\"w-full border rounded-xl px-3 py-2 min-h-[120px]\"\r\n            placeholder=\"Body (optional)\"\r\n            value={body}\r\n            onChange={(e) => setBody(e.target.value)}\r\n          />\r\n\r\n          {/* Image */}\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-slate-700 mb-1\">Image (optional)</label>\r\n            <input\r\n              type=\"file\"\r\n              accept=\"image/png,image/jpeg,image/jpg,image/webp\"\r\n              onChange={(e) => setImage(e.target.files?.[0] ?? null)}\r\n              className=\"block w-full text-sm\"\r\n            />\r\n            {image && (\r\n              <img\r\n                src={URL.createObjectURL(image)}\r\n                alt=\"preview\"\r\n                className=\"mt-2 max-h-56 rounded-xl border\"\r\n              />\r\n            )}\r\n          </div>\r\n\r\n          {/* Vehicle tags */}\r\n          <div className=\"grid grid-cols-2 gap-3\">\r\n            <input className=\"border rounded-xl px-3 py-2\" placeholder=\"Make\" value={vehicle.make} onChange={(e)=>setVehicle(v=>({...v, make:e.target.value}))} />\r\n            <input className=\"border rounded-xl px-3 py-2\" placeholder=\"Model\" value={vehicle.model} onChange={(e)=>setVehicle(v=>({...v, model:e.target.value}))} />\r\n            <input className=\"border rounded-xl px-3 py-2\" placeholder=\"Year From\" type=\"number\" value={vehicle.yearFrom} onChange={(e)=>setVehicle(v=>({...v, yearFrom:e.target.value}))} />\r\n            <input className=\"border rounded-xl px-3 py-2\" placeholder=\"Year To\" type=\"number\" value={vehicle.yearTo} onChange={(e)=>setVehicle(v=>({...v, yearTo:e.target.value}))} />\r\n          </div>\r\n\r\n          {/* Part tags (chips) */}\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-slate-700 mb-1\">Part tags</label>\r\n            <div className=\"flex gap-2\">\r\n              <input\r\n                className=\"flex-1 border rounded-xl px-3 py-2\"\r\n                placeholder=\"Type a tag and press Add\"\r\n                value={partInput}\r\n                onChange={(e) => setPartInput(e.target.value)}\r\n                onKeyDown={(e) => e.key === \"Enter\" && (e.preventDefault(), addPartTag())}\r\n              />\r\n              <button type=\"button\" onClick={addPartTag} className=\"border rounded-xl px-3 py-2 hover:bg-slate-50\">\r\n                Add\r\n              </button>\r\n            </div>\r\n            {partTags.length > 0 && (\r\n              <div className=\"mt-2 flex flex-wrap gap-2\">\r\n                {partTags.map((t) => (\r\n                  <span key={t} className=\"inline-flex items-center gap-2 px-2.5 py-1 rounded-full border bg-slate-50 text-sm\">\r\n                    {t}\r\n                    <button type=\"button\" onClick={() => removePartTag(t)} className=\"text-slate-400 hover:text-slate-600\">Ã—</button>\r\n                  </span>\r\n                ))}\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          <button className=\"w-full bg-blue-600 hover:bg-blue-700 text-white py-2 rounded-xl\">\r\n            Publish\r\n          </button>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 346, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/theek/Documents/DA%20Project/smart-parts/web/node_modules/next/navigation.js"],"sourcesContent":["module.exports = require('./dist/client/components/navigation')\n"],"names":[],"mappings":"AAAA,OAAO,OAAO","ignoreList":[0],"debugId":null}}]
}